/**
 * Image magnifier (jQuery Plugin)
 *
 * @link      https://github.com/DevDiamondCom/image-magnifier
 * @author    DevDiamond <me@devdiamond.com>
 * @copyright (c) 2016 DevDiamond. (email : me@devdiamond.com)
 * @licence   GPLv3 or later - http://www.gnu.org/licenses/gpl-3.0.html
 * @version   1.0.1
 */
!function(a,b,c){a.fn.imageMagnifier=function(c){var d={magPercent:100,magPosition:"right",magIndent:10,cursorWidth:0,cursorHeight:0,cursorPercent:45,cursorType:"pointer",minDisplayWidth:0};c=a.extend(d,c||{}),c.imgExpr=this.selector,a(b).ready(function(){var d=!1,e="dd_image_magnifier_block",f="."+e,g=f+" > div",h=g+" > img",i="dd_image_magnifier_cursor",j="."+i,k=a("body"),l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0;c.magPercent=parseFloat(c.magPercent),c.magPercent<1&&(c.magPercent=100),a.inArray(c.magPosition,["top","bottom","left","right"])===-1&&(c.magPosition="right"),c.magIndent=parseInt(c.magIndent),c.cursorPercent=parseFloat(c.cursorPercent),c.cursorWidth=parseInt(c.cursorWidth),c.cursorHeight=parseInt(c.cursorHeight),c.minDisplayWidth=parseInt(c.minDisplayWidth),c.cursorWidth<1&&(c.cursorWidth=100),c.cursorHeight<1&&(c.cursorHeight=100),""==c.cursorType&&(c.cursorType="pointer"),c.minDisplayWidth<0&&(c.minDisplayWidth=0);var v={cursor_coordinate:function(a,b){t=b-c.cursorHeight/2,u=a-c.cursorWidth/2,t<l?t=l:t+c.cursorHeight>o&&(t=o-c.cursorHeight),u<m?u=m:u+c.cursorWidth>n&&(u=n-c.cursorWidth)},image_coordinate:function(){r=l-t,r+=r*c.magPercent/100,s=m-u,s+=s*c.magPercent/100},is_display:function(){return!(c.minDisplayWidth>a(window).width())||(d&&(d=!1,a(f).stop().fadeOut(150),a(j).stop().fadeOut(150)),!1)}};a(b).on("mousemove",c.imgExpr,function(b){if(v.is_display()&&!d&&""!=b.target.src&&"undefined"!=typeof b.target.src&&(l=b.pageY-b.offsetY+parseFloat(a(this).css("padding-top")),m=b.pageX-b.offsetX+parseFloat(a(this).css("padding-left")),n=m+b.target.width,o=l+b.target.height,!(b.pageY<l||b.pageY>o||b.pageX<m||b.pageX>n))){c.cursorPercent>0&&(c.cursorWidth=b.target.width*c.cursorPercent/100,c.cursorHeight=b.target.height*c.cursorPercent/100),v.cursor_coordinate(b.pageX,b.pageY);var g=c.cursorWidth+c.cursorWidth*c.magPercent/100,w=c.cursorHeight+c.cursorHeight*c.magPercent/100,x=l,y=m;switch(c.magPosition){case"top":x=l-c.magIndent-w;break;case"bottom":x=o+c.magIndent;break;case"left":y=m-c.magIndent-g;break;case"right":y=n+c.magIndent}p=b.target.width+b.target.width*c.magPercent/100,q=b.target.height+b.target.height*c.magPercent/100,v.image_coordinate(),0==a(j).stop().length&&k.append('<div class="'+i+'" style="display: none; background: #fff; opacity: 0.4; cursor: '+c.cursorType+'; border: 1px solid #999;"></div>'),a(j).css({width:c.cursorWidth+"px",height:c.cursorHeight+"px",position:"absolute",top:t,left:u,"z-index":992}).fadeIn(150),0==a(f).stop().length&&k.append('<div class="'+e+'" style="display: none; border: 1px solid #999;"><div style="display: block; position: relative;"><img src="'+b.target.src+'"/></div></div>'),a(h).attr({src:b.target.src}).css({width:p+"px",height:q+"px",position:"absolute",top:r,left:s}),a(f).css({width:g+"px",height:w+"px",position:"absolute",overflow:"hidden",top:x,left:y,"z-index":991}).fadeIn(150),d=!0}}),a(b.body).on("mousemove",j,function(b){v.is_display()&&(v.cursor_coordinate(b.pageX,b.pageY),a(j).css({width:c.cursorWidth+"px",height:c.cursorHeight+"px",top:t,left:u}),v.image_coordinate(),a(h).attr({src:b.target.src}).css({width:p+"px",height:q+"px",top:r,left:s}))}),a(b.body).on("mouseout",j,function(){v.is_display()&&(d=!1,a(f).stop().fadeOut(150),a(j).stop().fadeOut(150))})})}}(jQuery,document);